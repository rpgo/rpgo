language: php

php:
  - 5.4
  - 5.5
  - 5.6
  - hhvm

before_script:
  - composer self-update
  - composer install --dev --prefer-source --no-interaction

script:
  - vendor/bin/phpspec run
  - vendor/bin/behat -f progress

after_success:
  - composer install --no-dev --prefer-source --no-interaction
  - curl --ftp-create-dirs -T uploadfilename -u $FTP_USER:$FTP_PASSWORD ftp://t104.nlg.hu/dir

env:
  global:
  - secure: C52i/r1/H+s8is4Z0RD0YSma6CoEkSlflLI9/l2jpfcOncnsciSOPSRy/AF87nsNLTJa5nU88iKjp9LtRkeepH/VP4ZKxA83PnTxC3h90v/l8vubxd3UomH1H/A+DLL2nG2cVD4BeDgOJxNzIoJMZYYQ80LZOXHSdT0WMverYcg=
  - secure: HmQDrLQLDsEzSptoONcq/+4CFD1fFp7EZAiPpx6AQ2q7kYK3stnrQCzWbYu86OC6ehNgW+WwHsRD0iE+8clDvfewcJ2IldDdm/YghXS53J9CGp+z68bT5HGA1fIj4sp5F/YseRTaN2gmCzqZhfQz/5cIPdnlqwRVF2A+DuYJp1A=

notifications:
  email:
    recipients:
      - tolilybelle@gmail.com
    on_success: change
    on_failure: always